(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var transpose=require("music.kit/note/transpose");var parse=require("music.kit/pitch/parse");var rotate=require("music.kit/gamut/rotate");var select=require("music.kit/gamut/select");var type=require("music.kit/chord/type");function s(n){return n.split(" ")}function h(n){return s(n).map(parse)}function name(n){return n?n.trim().toLowerCase():n}var SCALES={major:h("1 2 3 4 5 6 7")};function key(){}key.scale=function(key){var k=s(key);return(SCALES[name(k[1])]||[]).map(transpose(k[0]))};function isFlat(a){return a[0]<-1}function isSharp(a){return a[0]>5}function isAlt(i){var a=parse(i);return isFlat(a)||isSharp(a)}key.altered=function(k){var notes=key.scale(k).filter(isAlt).sort(function(a,b){return parse(a)[0]-parse(b)[0]});if(isFlat(parse(notes[0])))notes.reverse();return notes};key.modes=function(k){var s=key.scale(k);return s.map(function(n,i){return rotate(i,s)})};key.chords=function(k){return key.modes(k).map(function(scale){var chord=select("1 3 5 7",scale);return chord[0]+type(chord).replace("M","")})};module.exports=key},{"music.kit/chord/type":3,"music.kit/gamut/rotate":6,"music.kit/gamut/select":7,"music.kit/note/transpose":14,"music.kit/pitch/parse":16}],2:[function(require,module,exports){"use strict";module.exports=function(fn){return function(a,b){if(arguments.length===1)return function(c){return fn(a,c)};return fn(a,b)}}},{}],3:[function(require,module,exports){"use strict";var harmonics=require("../gamut/harmonics");module.exports=function(chord){var g=harmonics(chord);if(g[1]==="3M")return g[3]==="7m"?"7":"M";if(g[1]==="3m")return g[2]==="5P"?"m":"o";return null}},{"../gamut/harmonics":4}],4:[function(require,module,exports){var operation=require("./operation");var distance=require("../note/distance");module.exports=operation(function(gamut){var tonic=gamut[0];return gamut.map(distance(tonic))})},{"../note/distance":11,"./operation":5}],5:[function(require,module,exports){var split=require("./split");var parse=require("../pitch/parse");var build=require("../pitch/str");module.exports=function(fn){return function(source){var g=split(source);if(Array.isArray(g[0]))return fn(g);var v=fn(g.map(parse));return Array.isArray(v)?v.map(build):v}}},{"../pitch/parse":16,"../pitch/str":18,"./split":8}],6:[function(require,module,exports){"use strict";var split=require("./split");module.exports=function(count,source){var g=split(source);var len=g.length;var n=(count%len+len)%len;return g.slice(n,len).concat(g.slice(0,n))}},{"./split":8}],7:[function(require,module,exports){"use strict";var curry=require("../_curry");var split=require("./split");module.exports=curry(function(nums,gamut){var g=split(gamut);return split(nums).map(function(n){return g[n-1]})})},{"../_curry":2,"./split":8}],8:[function(require,module,exports){var SEP=/\s*\|\s*|\s*,\s*|\s+/;module.exports=function(source){if(Array.isArray(source))return source;else if(typeof source==="string")return source.trim().split(SEP);else if(source===null||typeof source==="undefined")return[];else return[source]}},{}],9:[function(require,module,exports){"use strict";var INTERVAL=/^([-+]?)(\d+)(d{1,4}|m|M|P|A{1,4}|b{1,4}|#{1,4}|)$/;var TYPES="PMMPPMM";var QALT={P:{dddd:-4,ddd:-3,dd:-2,d:-1,P:0,A:1,AA:2,AAA:3,AAAA:4},M:{ddd:-4,dd:-3,d:-2,m:-1,M:0,A:1,AA:2,AAA:3,AAAA:4}};var cache={};module.exports=function(str){if(typeof str!=="string")return null;return str in cache?cache[str]:cache[str]=parse(str)};var BASES=[[0,0],[2,-1],[4,-2],[-1,1],[1,0],[3,-1],[5,-2]];function parse(str){var m=INTERVAL.exec(str);if(!m)return null;var dir=m[1]==="-"?-1:1;var num=+m[2]-1;var simple=num%7;var base=BASES[simple];var alt;if(m[3]==="")alt=0;else if(m[3][0]==="#")alt=m[3].length;else if(m[3][0]==="b")alt=-m[3].length;else{alt=QALT[TYPES[simple]][m[3]];if(typeof alt==="undefined")return null}var oct=dir*Math.floor(num/7);return[dir*(base[0]+7*alt),oct+dir*(base[1]-4*alt)]}},{}],10:[function(require,module,exports){"use strict";var props=require("../pitch/props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length!==2)return null;var str="|"+arr[0]+"|"+arr[1];return str in cache?cache[str]:cache[str]=build(arr)};var ALTER={P:["dddd","ddd","dd","d","P","A","AA","AAA","AAAA"],M:["ddd","dd","d","m","M","A","AA","AAA","AAAA"]};var TYPES="PMMPPMM";function build(coord){var p=props(coord);var t=TYPES[p[0]];var dir,num,alt;if(p[2]<0){dir=-1;num=8-p[0]-7*(p[2]+1);alt=t==="P"?-p[1]:-(p[1]+1)}else{dir=1;num=p[0]+1+7*p[2];alt=p[1]}var q=ALTER[t][4+alt];return dir*num+q}},{"../pitch/props":17}],11:[function(require,module,exports){var curry=require("../_curry");var operation=require("../pitch/operation");module.exports=curry(operation(function(a,b){if(!Array.isArray(a)||!Array.isArray(b))return null;if(a.length===1||b.length===1){var base=b[0]-a[0];return[base,-Math.floor(base*7/12)]}return[b[0]-a[0],b[1]-a[1]]}))},{"../_curry":2,"../pitch/operation":15}],12:[function(require,module,exports){"use strict";var REGEX=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)(?:\/(\d+))?$/;var BASES={C:[0,0],D:[2,-1],E:[4,-2],F:[-1,1],G:[1,0],A:[3,-1],B:[5,-2]};var cache={};module.exports=function(str){return str in cache?cache[str]:cache[str]=parse(str)};function parse(str){var m=REGEX.exec(str);if(!m)return null;var base=BASES[m[1].toUpperCase()];var alt=m[2].replace(/x/g,"##").length;if(m[2][0]==="b")alt*=-1;var fifths=base[0]+7*alt;if(!m[3])return[fifths];var oct=+m[3]+base[1]-4*alt;return[fifths,oct,m[4]?+m[4]:null]}},{}],13:[function(require,module,exports){"use strict";var props=require("../pitch/props");var cache={};module.exports=function(arr){if(!Array.isArray(arr)||arr.length<1||arr.length===2)return null;var str="|"+arr[0]+"|"+arr[1]+"|"+arr[2];return str in cache?cache[str]:cache[str]=build(arr)};function accidentals(num){if(num<0)return Array(-num+1).join("b");else if(num>0)return Array(num+1).join("#");else return""}var LETTER=["C","D","E","F","G","A","B"];function build(coord){var p=props(coord);return LETTER[p[0]]+accidentals(p[1])+(p[2]!==null?p[2]:"")+(p[3]!==null?p[3]:"")}},{"../pitch/props":17}],14:[function(require,module,exports){var operation=require("../pitch/operation");var curry=require("../_curry");module.exports=curry(operation(function(i,n){if(i===false)return n;else if(!Array.isArray(i)||!Array.isArray(n))return null;else if(i.length===1||n.length===1)return[n[0]+i[0]];var d=i.length===2&&n.length===2?null:n[2]||i[2];return[n[0]+i[0],n[1]+i[1],d]}))},{"../_curry":2,"../pitch/operation":15}],15:[function(require,module,exports){var parse=require("./parse");var build=require("./str");module.exports=function(fn){return function(a,b){var pa=parse(a);var pb=parse(b);if(!pa&&!pb)return fn(a,b);var v=fn(pa||a,pb||b);return build(v)||v}}},{"./parse":16,"./str":18}],16:[function(require,module,exports){var pn=require("../note/parse");var pi=require("../interval/parse");module.exports=function(n){return pn(n)||pi(n)}},{"../interval/parse":9,"../note/parse":12}],17:[function(require,module,exports){"use strict";var BASES=[[3,1],[0,0],[4,0],[1,-1],[5,-1],[2,-2],[6,-2],[3,-3]];module.exports=function(arr){if(!Array.isArray(arr))return null;var index=(arr[0]+1)%7;if(index<0)index=7+index;var base=BASES[index];var alter=Math.floor((arr[0]+1)/7);var oct=arr.length===1?null:arr[1]-base[1]+alter*4;var dur=arr[2]?"/"+arr[2]:null;return[base[0],alter,oct,dur]}},{}],18:[function(require,module,exports){var ns=require("../note/str");var is=require("../interval/str");module.exports=function(n){return ns(n)||is(n)}},{"../interval/str":10,"../note/str":13}]},{},[1]);